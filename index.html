<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Sidebar Navigation -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h3>Sistema</h3>
            <button class="sidebar-toggle" id="sidebarToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <nav class="sidebar-nav">
            <ul>
                <li class="nav-item active">
                    <a href="#" class="nav-link" data-section="productos">
                        <span class="nav-icon">üì¶</span>
                        <span class="nav-text">Productos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="categorias">
                        <span class="nav-icon">üìÇ</span>
                        <span class="nav-text">Categor√≠as</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="clientes">
                        <span class="nav-icon">üë§</span>
                        <span class="nav-text">Clientes</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="tickets">
                        <span class="nav-icon">üßæ</span>
                        <span class="nav-text">Tickets</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="gastos">
                        <span class="nav-icon">üí∞</span>
                        <span class="nav-text">Gastos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="estadisticas">
                        <span class="nav-icon">üìä</span>
                        <span class="nav-text">Estad√≠sticas de Ventas</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="usuarios">
                        <span class="nav-icon">üë•</span>
                        <span class="nav-text">Usuarios</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link" data-section="ajustes">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span class="nav-text">Ajustes</span>
                    </a>
                </li>
            </ul>
        </nav>
    </div>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content Area -->
    <div class="main-content" id="mainContent">
        <header class="app-header">
            <button class="mobile-menu-btn" id="mobileMenuBtn">‚ò∞</button>
            <h1 id="pageTitle">Productos</h1>
        </header>

        <!-- Productos Section -->
        <section id="productosSection" class="content-section active">
            <div class="section-content">
                <div class="content-grid">
                    <!-- Add Product Form -->
                    <div class="form-section">
                        <h2>Agregar Producto</h2>
                        <form id="itemForm">
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="itemName">Nombre del Producto:</label>
                                    <input type="text" id="itemName" required>
                                </div>
                                <div class="input-group">
                                    <label for="itemPrice">Precio:</label>
                                    <input type="number" id="itemPrice" step="0.01" min="0" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="itemDiscount">Descuento (%):</label>
                                    <input type="number" id="itemDiscount" step="0.01" min="0" max="100" value="0">
                                </div>
                                <div class="input-group">
                                    <label for="itemStock">Stock:</label>
                                    <input type="number" id="itemStock" min="0" required>
                                </div>
                                <div class="input-group">
                                    <label for="itemSold">Vendidos:</label>
                                    <input type="number" id="itemSold" min="0" value="0">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="itemBarcode">C√≥digo de Barras:</label>
                                    <input type="text" id="itemBarcode">
                                </div>
                                <div class="input-group">
                                    <label for="itemImage">URL de Imagen:</label>
                                    <input type="url" id="itemImage" placeholder="https://ejemplo.com/imagen.jpg">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="itemCloth">Tipo de Tela:</label>
                                    <select id="itemCloth">
                                        <option value="NA">NA</option>
                                        <option value="calidad-economica">Calidad Economica</option>
                                        <option value="calidad-economica-plus">Calidad Economica plus</option>
                                        <option value="calidad-economica-premium">Calidad Economica premium</option>
                                        <option value="calidad-baja">Calidad Baja</option>
                                        <option value="calidad-baja-plus">Calidad Baja plus</option>
                                        <option value="calidad-baja-premium">Calidad Baja premium</option>
                                        <option value="calidad-media">Calidad Media</option>
                                        <option value="calidad-media-plus">Calidad Media plus</option>
                                        <option value="calidad-media-premium">Calidad Media premium</option>
                                        <option value="calidad-alta">Calidad Alta</option>
                                        <option value="calidad-alta-plus">Calidad Alta plus</option>
                                        <option value="calidad-alta-premium">Calidad Alta premium</option>
                                        <option value="calidad-premium">Calidad Premium</option>
                                        <option value="calidad-premium-plus">Calidad Premium plus</option>
                                        <option value="calidad-super-premium">Calidad Super premium</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="itemGender">G√©nero:</label>
                                    <select id="itemGender" required>
                                        <option value="NA">NA</option>
                                        <option value="hombre">Hombre</option>
                                        <option value="mujer">Mujer</option>
                                        <option value="unisex">Unisex</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="input-group">
                                    <label for="itemSize">Talla:</label>
                                    <select id="itemSize" required>
                                        <option value="NA">NA</option>
                                        <option value="XCH">XCH</option>
                                        <option value="CH">CH</option>
                                        <option value="M">M</option>
                                        <option value="G">G</option>
                                        <option value="XG">XG</option>
                                        <option value="XXG">XXG</option>
                                        <option value="XXXG">XXXG</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="itemCategory">Categor√≠a:</label>
                                    <select id="itemCategory" required>
                                        <option value="">Seleccionar Categor√≠a</option>
                                        <option value="electronics">Electr√≥nicos</option>
                                        <option value="books">Libros</option>
                                        <option value="clothing">Ropa</option>
                                        <option value="food">Comida</option>
                                        <option value="other">Otros</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="submit" class="btn-primary">Agregar Producto</button>
                                <button type="button" class="btn-secondary" id="updateProductBtn" style="display: none;">Actualizar Producto</button>
                                <button type="button" class="btn-danger" id="deleteProductBtn" style="display: none;">Eliminar Producto</button>
                                <button type="button" class="btn-clear" id="clearFormBtn">Limpiar Campos</button>
                            </div>
                        </form>
                    </div>

                    <!-- Products List -->
                    <div class="items-section">
                        <div class="items-header">
                            <h2>Lista de Productos</h2>
                            <button id="printCatalogBtn" class="print-catalog-btn-inline">
                                <span class="print-icon">üñ®Ô∏è</span>
                                Imprimir Cat√°logo
                            </button>
                        </div>
                        <div class="loading" id="loading" style="display: none;">Cargando...</div>
                        <div id="itemsList" class="items-container">
                            <!-- Items will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ajustes Section -->
        <section id="ajustesSection" class="content-section">
            <div class="section-content">
                <div class="settings-form-container">
                    <h2>Configuraci√≥n del Sistema</h2>
                    
                    <form id="settingsForm" class="settings-form">
                        <!-- Hidden fields that preserve their values -->
                        <input type="hidden" id="totalQtySales" name="TotalQtySales">
                        <input type="hidden" id="totalSales" name="TotalSales">
                        <input type="hidden" id="currency" name="Currency">
                        
                        <div class="form-section">
                            <h3>Informaci√≥n de la Empresa</h3>
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="businessName">Nombre de la Empresa:</label>
                                    <input type="text" id="businessName" name="Name" required>
                                </div>
                                <div class="input-group">
                                    <label for="rfc">RFC:</label>
                                    <input type="text" id="rfc" name="Rfc" maxlength="13" required>
                                </div>
                                <div class="input-group">
                                    <label for="email">Email:</label>
                                    <input type="email" id="email" name="Email" required>
                                </div>
                                <div class="input-group">
                                    <label for="phone">Tel√©fono:</label>
                                    <input type="tel" id="phone" name="Phone" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Direcci√≥n</h3>
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="address">Direcci√≥n:</label>
                                    <input type="text" id="address" name="Address" required>
                                </div>
                                <div class="input-group">
                                    <label for="colony">Colonia:</label>
                                    <input type="text" id="colony" name="Colony" required>
                                </div>
                                <div class="input-group">
                                    <label for="zip">C√≥digo Postal:</label>
                                    <input type="text" id="zip" name="Zip" maxlength="5" pattern="[0-9]{5}" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Configuraci√≥n de Ventas</h3>
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="discountGlobal">Descuento Global (%):</label>
                                    <input type="number" id="discountGlobal" name="DiscountGlobal" min="0" max="100" step="0.01">
                                </div>
                                <div class="input-group">
                                    <label for="salesGoal">Meta de Ventas ($):</label>
                                    <input type="number" id="salesGoal" name="SalesGoal" min="0" step="0.01">
                                </div>
                                <div class="input-group">
                                    <label for="salesQtyGoal">Meta de Cantidad de Ventas:</label>
                                    <input type="number" id="salesQtyGoal" name="SalesQtyGoal" min="0">
                                </div>
                                <div class="input-group">
                                    <label for="lastTicketNumber">√öltimo N√∫mero de Ticket:</label>
                                    <input type="number" id="lastTicketNumber" name="LastTicketNumber" min="0">
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Otros Ajustes</h3>
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="smallBox">Caja Chica ($):</label>
                                    <input type="number" id="smallBox" name="SmallBox" min="0" step="0.01">
                                </div>
                                <div class="input-group">
                                    <label for="spendings">Gastos ($):</label>
                                    <input type="number" id="spendings" name="Spendings" min="0" step="0.01">
                                </div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Guardar Configuraci√≥n</button>
                            <button type="button" id="resetSettings" class="btn btn-secondary">Restablecer</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Categor√≠as Section -->
        <section id="categoriasSection" class="content-section">
            <div class="section-content">
                <div class="categories-container">
                    <!-- Category Form Section -->
                    <div class="category-form-container">
                        <h2>Agregar Categor√≠a</h2>
                        
                        <form id="categoryForm" class="category-form">
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="categoryName">Nombre de la Categor√≠a:</label>
                                    <input type="text" id="categoryName" name="Name" required placeholder="Ej: Dispositivos m√©dicos">
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">Agregar Categor√≠a</button>
                                <button type="button" id="clearCategoryFormBtn" class="btn btn-secondary">Limpiar</button>
                            </div>
                        </form>
                    </div>

                    <!-- Categories List Section -->
                    <div class="categories-list-container">
                        <div class="categories-list-header">
                            <h3>Lista de Categor√≠as</h3>
                            <div class="list-actions">
                                <button class="btn btn-info" onclick="loadCategoriesForManagement()">üîÑ Actualizar</button>
                            </div>
                        </div>
                        
                        <div id="categoriesLoading" class="loading" style="display: none;">Cargando categor√≠as...</div>
                        
                        <div id="categoriesManagementList" class="categories-list">
                            <!-- Categories table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Clientes Section -->
        <section id="clientesSection" class="content-section">
            <div class="section-content">
                <div class="clients-container">
                    <!-- Client Form Section -->
                    <div class="client-form-container">
                        <h2 id="clientFormTitle">Agregar Cliente</h2>
                        
                        <form id="clientForm" class="client-form">
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="clientPhone">Tel√©fono:</label>
                                    <input type="tel" id="clientPhone" name="Phone" required placeholder="Ej: 1234567890">
                                </div>
                                
                                <div class="input-group">
                                    <label for="clientPurchased">Compras:</label>
                                    <input type="number" id="clientPurchased" name="Purchased" min="0" value="0" placeholder="0">
                                </div>
                                
                                <div class="input-group">
                                    <label for="clientDiscount">Descuento (%):</label>
                                    <input type="number" id="clientDiscount" name="Discount" step="0.01" min="0" max="100" value="0" placeholder="0">
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" id="submitClientBtn" class="btn btn-primary">Agregar Cliente</button>
                                <button type="button" id="updateClientBtn" class="btn btn-secondary" style="display: none;">Actualizar</button>
                                <button type="button" id="deleteClientBtn" class="btn btn-danger" style="display: none;">Eliminar</button>
                                <button type="button" id="clearClientFormBtn" class="btn btn-outline">Limpiar</button>
                            </div>
                        </form>
                    </div>

                    <!-- Clients List Section -->
                    <div class="clients-list-container">
                        <div class="clients-list-header">
                            <h3>Lista de Clientes</h3>
                            <div class="list-actions">
                                <button class="btn btn-info" onclick="loadClients()">üîÑ Actualizar</button>
                            </div>
                        </div>
                        
                        <div id="clientsLoading" class="loading" style="display: none;">Cargando clientes...</div>
                        
                        <div id="clientsList" class="clients-list">
                            <!-- Clients table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Tickets Section -->
        <section id="ticketsSection" class="content-section">
            <div class="section-content">
                <div class="tickets-container">
                    <!-- Tickets Header -->
                    <div class="tickets-header">
                        <h2>Gesti√≥n de Tickets</h2>
                        <div class="tickets-actions">
                            <button class="btn btn-info" onclick="loadTickets()">üîÑ Actualizar</button>
                            <button class="btn btn-primary" onclick="printAllTickets()">üñ® Imprimir PDF</button>
                        </div>
                    </div>

                    <!-- Tickets List Section -->
                    <div class="tickets-list-container">
                        <div id="ticketsLoading" class="loading" style="display: none;">Cargando tickets...</div>
                        
                        <div id="ticketsList" class="tickets-list">
                            <!-- Tickets table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Gastos Section -->
        <section id="gastosSection" class="content-section">
            <div class="section-content">
                <div class="spendings-container">
                    <!-- Spendings Header -->
                    <div class="spendings-header">
                        <h2>Gesti√≥n de Gastos</h2>
                        <div class="spendings-actions">
                            <button class="btn btn-info" onclick="loadSpendings()">üîÑ Actualizar</button>
                            <button class="btn btn-primary" onclick="printAllSpendings()">üñ® Imprimir PDF</button>
                        </div>
                    </div>

                    <!-- Spendings List Section -->
                    <div class="spendings-list-container">
                        <div id="spendingsLoading" class="loading" style="display: none;">Cargando gastos...</div>
                        
                        <div id="spendingsList" class="spendings-list">
                            <!-- Spendings table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Estad√≠sticas de Ventas Section -->
        <section id="estadisticasSection" class="content-section">
            <div class="section-content">
                <div class="sales-stats-container">
                    <!-- Sales Statistics Header -->
                    <div class="sales-stats-header">
                        <h2>Estad√≠sticas de Ventas</h2>
                        <div class="sales-stats-actions">
                            <button class="btn btn-info" onclick="loadSalesStatistics()">üîÑ Actualizar</button>
                            <button class="btn btn-primary" onclick="printSalesStatistics()">üñ® Imprimir PDF</button>
                        </div>
                    </div>

                    <!-- Sales Statistics List Section -->
                    <div class="sales-stats-list-container">
                        <div id="salesStatsLoading" class="loading" style="display: none;">Cargando estad√≠sticas...</div>
                        
                        <div id="salesStatsList" class="sales-stats-list">
                            <!-- Sales statistics table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Usuarios Section -->
        <section id="usuariosSection" class="content-section">
            <div class="section-content">
                <div class="users-container">
                    <!-- User Form Section -->
                    <div class="user-form-container">
                        <h2 id="userFormTitle">Agregar Usuario</h2>
                        
                        <form id="userForm" class="user-form">
                            <div class="form-grid">
                                <div class="input-group">
                                    <label for="userEmail">Email:</label>
                                    <input type="email" id="userEmail" name="Email" required>
                                </div>
                                <div class="input-group">
                                    <label for="userPassword">Contrase√±a:</label>
                                    <input type="password" id="userPassword" name="Password" required>
                                </div>
                                <div class="input-group">
                                    <label for="userRole">Rol:</label>
                                    <select id="userRole" name="Role" required>
                                        <option value="">Seleccionar rol</option>
                                        <option value="Usuario">Usuario</option>
                                        <option value="Administrador">Administrador</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label for="userAccess">Acceso:</label>
                                    <select id="userAccess" name="Access" required>
                                        <option value="">Seleccionar acceso</option>
                                        <option value="true">Activo</option>
                                        <option value="false">Inactivo</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-actions">
                                <button type="submit" id="submitUserBtn" class="btn btn-primary">Agregar Usuario</button>
                                <button type="button" id="updateUserBtn" class="btn btn-success" style="display: none;">Actualizar Usuario</button>
                                <button type="button" id="deleteUserBtn" class="btn btn-danger" style="display: none;">Eliminar Usuario</button>
                                <button type="button" id="clearUserFormBtn" class="btn btn-secondary">Limpiar</button>
                            </div>
                        </form>
                    </div>

                    <!-- Users List Section -->
                    <div class="users-list-container">
                        <div class="users-list-header">
                            <h3>Lista de Usuarios</h3>
                            <div class="list-actions">
                                <button class="btn btn-info" onclick="loadUsers()">üîÑ Actualizar</button>
                            </div>
                        </div>
                        
                        <div id="usersLoading" class="loading" style="display: none;">Cargando usuarios...</div>
                        
                        <div id="usersList" class="users-list">
                            <!-- Users table will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Status Messages -->
        <div id="statusMessage" class="status-message"></div>
    </div>

    <!-- Edit Modal -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Editar Producto</h2>
            <form id="editForm">
                <input type="hidden" id="editItemId">
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="editItemName">Nombre:</label>
                        <input type="text" id="editItemName" required>
                    </div>
                    <div class="input-group">
                        <label for="editItemPrice">Precio:</label>
                        <input type="number" id="editItemPrice" step="0.01" min="0" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="editItemDiscount">Descuento (%):</label>
                        <input type="number" id="editItemDiscount" step="0.01" min="0" max="100">
                    </div>
                    <div class="input-group">
                        <label for="editItemStock">Stock:</label>
                        <input type="number" id="editItemStock" min="0" required>
                    </div>
                    <div class="input-group">
                        <label for="editItemSold">Vendidos:</label>
                        <input type="number" id="editItemSold" min="0">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="editItemBarcode">C√≥digo de Barras:</label>
                        <input type="text" id="editItemBarcode">
                    </div>
                    <div class="input-group">
                        <label for="editItemImage">URL de Imagen:</label>
                        <input type="url" id="editItemImage">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="editItemCloth">Tipo de Tela:</label>
                        <select id="editItemCloth">
                            <option value="NA">NA</option>
                            <option value="calidad-economica">Calidad Economica</option>
                            <option value="calidad-economica-plus">Calidad Economica plus</option>
                            <option value="calidad-economica-premium">Calidad Economica premium</option>
                            <option value="calidad-baja">Calidad Baja</option>
                            <option value="calidad-baja-plus">Calidad Baja plus</option>
                            <option value="calidad-baja-premium">Calidad Baja premium</option>
                            <option value="calidad-media">Calidad Media</option>
                            <option value="calidad-media-plus">Calidad Media plus</option>
                            <option value="calidad-media-premium">Calidad Media premium</option>
                            <option value="calidad-alta">Calidad Alta</option>
                            <option value="calidad-alta-plus">Calidad Alta plus</option>
                            <option value="calidad-alta-premium">Calidad Alta premium</option>
                            <option value="calidad-premium">Calidad Premium</option>
                            <option value="calidad-premium-plus">Calidad Premium plus</option>
                            <option value="calidad-super-premium">Calidad Super premium</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="editItemGender">G√©nero:</label>
                        <select id="editItemGender" required>
                            <option value="NA">NA</option>
                            <option value="hombre">Hombre</option>
                            <option value="mujer">Mujer</option>
                            <option value="unisex">Unisex</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="input-group">
                        <label for="editItemSize">Talla:</label>
                        <select id="editItemSize" required>
                            <option value="NA">NA</option>
                            <option value="XCH">XCH</option>
                            <option value="CH">CH</option>
                            <option value="M">M</option>
                            <option value="G">G</option>
                            <option value="XG">XG</option>
                            <option value="XXG">XXG</option>
                            <option value="XXXG">XXXG</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="editItemCategory">Categor√≠a:</label>
                        <select id="editItemCategory" required>
                            <option value="electronics">Electr√≥nicos</option>
                            <option value="books">Libros</option>
                            <option value="clothing">Ropa</option>
                            <option value="food">Comida</option>
                            <option value="other">Otros</option>
                        </select>
                    </div>
                </div>
                
                <div class="modal-buttons">
                    <button type="submit" class="btn-primary">Actualizar Producto</button>
                    <button type="button" id="cancelEdit" class="btn-secondary">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="app.js"></script>
</body>
</html>